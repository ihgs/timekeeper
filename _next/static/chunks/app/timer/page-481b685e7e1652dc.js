(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{9204:function(e,t,a){Promise.resolve().then(a.bind(a,8327))},8327:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=a(3827),i=a(4090),s=a(7907);let l=(0,a(4814).Z)({mode:"vega",spec:{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Presentaion timer",autosize:"none",signals:[{name:"minutes",update:"data('timer')[0] ? data('timer')[0].min: 0"},{name:"innerRadius",init:"width/4"},{name:"startDate",init:"now()"},{name:"endDate",update:"startDate+minutes*60*1000"},{name:"baseTimer",init:"endDate - startDate",on:[{events:{type:"timer",throttle:500},update:"(endDate - now())"}]},{name:"timer",init:"0",on:[{events:{signal:"baseTimer"},update:"(endDate - startDate - baseTimer)/(endDate - startDate)*6.29"}]},{name:"fontSize",init:"40"},{name:"fontPadding",init:"5"},{name:"timerStr",init:"",on:[{events:{signal:"baseTimer"},update:"baseTimer >= 0 ? floor(baseTimer/1000/60)+':'+pad(floor((baseTimer/1000))%60,2, '0', 'left'): floor(-1*baseTimer/1000/60)+':'+pad(floor((-1*baseTimer/1000))%60,2, '0', 'left')"}]}],data:[{name:"table",values:[{id:1,value:10},{id:2,value:20},{id:3,value:50}],transform:[{type:"window",ops:["sum"],fields:["value"],as:["sum"]},{type:"pie",field:"value",startAngle:0,endAngle:6.29,sort:!1}]},{name:"timer",values:[]}],scales:[{name:"color",type:"ordinal",domain:{data:"table",field:"id"},range:{scheme:"category20"}}],marks:[{type:"arc",from:{data:"table"},encode:{enter:{fill:{scale:"color",field:"id"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{field:"startAngle"},endAngle:{field:"endAngle"},padAngle:{value:0},innerRadius:{signal:"innerRadius"},outerRadius:{signal:"width / 2 - fontSize - fontPadding"},cornerRadius:{value:0}}}},{type:"arc",encode:{enter:{fill:{value:"white"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{value:0},endAngle:{signal:"timer"},padAngle:{value:0},innerRadius:{signal:"innerRadius"},outerRadius:{signal:"width / 2 - fontSize - fontPadding"},cornerRadius:{value:0}}}},{type:"text",from:{data:"table"},encode:{enter:{x:{signal:"width / 2"},y:{signal:"height / 2"},radius:{signal:"width / 2 - fontSize/2"},theta:{signal:"datum.endAngle"},fill:{value:"#000"},align:{value:"center"},baseline:{value:"middle"},text:{signal:"(minutes - datum.sum) == 0 ? minutes : (minutes - datum.sum)"}},update:{fontSize:{signal:"timer < datum.endAngle ? fontSize: fontSize/2"}}}},{type:"text",encode:{enter:{x:{signal:"width/2"},y:{signal:"height /2"},align:{value:"center"},baseline:{value:"middle"},fontSize:{signal:"width/ 8"}},update:{text:{signal:"timerStr"},fill:[{test:"baseTimer >= 0",value:"black"},{value:"red"}]}}}],width:400,height:400}});var d=a(4332),r=a(3890);function u(){let e=(0,s.useSearchParams)(),t=e.get("min"),a=e.get("points"),[u,o]=(0,i.useState)([]),[m,g]=(0,i.useState)(!1),[h,c]=(0,i.useState)(300);return(0,i.useEffect)(()=>{c(Math.min(window.innerHeight,window.innerWidth)),a&&o(a.split(",").map((e,t)=>({id:t,value:parseInt(e)})))},[a]),(0,n.jsx)(d.Z,{sx:{paddingTop:12},direction:"column",gap:6,alignItems:"center",children:m?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l,{actions:!1,data:{table:u,timer:[{min:t}]},width:.8*h,height:.8*h})}):(0,n.jsxs)(r.Z,{variant:"contained",onClick:()=>g(!0),children:["Start (",t," åˆ†)"]})})}}},function(e){e.O(0,[215,814,971,69,744],function(){return e(e.s=9204)}),_N_E=e.O()}]);