(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{9204:function(e,t,a){Promise.resolve().then(a.bind(a,2028))},2028:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var i=a(3827),n=a(4090),l=a(7907),s=a(4814);let r=(0,s.Z)({mode:"vega",spec:{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Presentaion timer",autosize:"none",signals:[{name:"minutes",update:"data('timer')[0] ? data('timer')[0].min: 0"},{name:"innerRadius",init:"width/4"},{name:"startDate",init:"now()"},{name:"endDate",update:"startDate+minutes*60*1000"},{name:"baseTimer",init:"endDate - startDate",on:[{events:{type:"timer",throttle:200},update:"(endDate - now())"}]},{name:"timer",init:"0",on:[{events:{signal:"baseTimer"},update:"(endDate - startDate - baseTimer)/(endDate - startDate)*6.29"}]},{name:"fontSize",init:"40"},{name:"fontPadding",init:"5"},{name:"timerStr",init:"",on:[{events:{signal:"baseTimer"},update:"baseTimer >= 0 ? floor(baseTimer/1000/60)+':'+pad(floor((baseTimer/1000))%60,2, '0', 'left'): floor(-1*baseTimer/1000/60)+':'+pad(floor((-1*baseTimer/1000))%60,2, '0', 'left')"}]}],data:[{name:"table",values:[{id:1,value:10},{id:2,value:20},{id:3,value:50}],transform:[{type:"window",ops:["sum"],fields:["value"],as:["sum"]},{type:"pie",field:"value",startAngle:0,endAngle:6.29,sort:!1}]},{name:"timer",values:[]}],scales:[{name:"color",type:"ordinal",domain:{data:"table",field:"id"},range:{scheme:"category20"}}],marks:[{type:"arc",from:{data:"table"},encode:{enter:{fill:{scale:"color",field:"id"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{field:"startAngle"},endAngle:{field:"endAngle"},padAngle:{value:0},innerRadius:{signal:"innerRadius"},outerRadius:{signal:"width / 2 - fontSize - fontPadding"},cornerRadius:{value:0}}}},{type:"arc",encode:{enter:{fill:{value:"white"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{value:0},endAngle:{signal:"timer"},padAngle:{value:0},innerRadius:{signal:"innerRadius"},outerRadius:{signal:"width / 2 - fontSize - fontPadding"},cornerRadius:{value:0}}}},{type:"text",from:{data:"table"},encode:{enter:{x:{signal:"width / 2"},y:{signal:"height / 2"},radius:{signal:"width / 2 - fontSize/2"},theta:{signal:"datum.endAngle"},fill:{value:"#000"},align:{value:"center"},baseline:{value:"middle"},text:{signal:"(minutes - datum.sum) == 0 ? minutes : (minutes - datum.sum)"}},update:{fontSize:{signal:"timer < datum.endAngle ? fontSize: fontSize/2"}}}},{type:"text",encode:{enter:{x:{signal:"width/2"},y:{signal:"height /2"},align:{value:"center"},baseline:{value:"middle"},fontSize:{signal:"width/ 8"}},update:{text:{signal:"timerStr"},fill:[{test:"baseTimer >= 0",value:"black"},{value:"red"}]}}}],width:400,height:400}});var d=a(4332),o=a(9835),m=a(7993),u=a(334),g=a(7640),c=a(4466);let h=(0,s.Z)({mode:"vega",spec:{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Presentaion timer",autosize:"none",signals:[{name:"minutes",update:"data('timer')[0] ? data('timer')[0].min: 0"},{name:"startDate",init:"now()"},{name:"endDate",update:"startDate+minutes*60*1000"},{name:"baseTimer",init:"endDate - startDate",on:[{events:{type:"timer",throttle:200},update:"(endDate - now())"}]},{name:"timer",init:"0",on:[{events:{signal:"baseTimer"},update:"(endDate - startDate - baseTimer)/(endDate - startDate) * minutes"}]},{name:"fontSize",init:"40"},{name:"timerFontSize",init:"height*2/3"},{name:"barHeight",init:"100"},{name:"fontPadding",init:"5"},{name:"timerStr",init:"",on:[{events:{signal:"baseTimer"},update:"baseTimer >= 0 ? floor(baseTimer/1000/60)+':'+pad(floor((baseTimer/1000))%60,2, '0', 'left'): floor(-1*baseTimer/1000/60)+':'+pad(floor((-1*baseTimer/1000))%60,2, '0', 'left')"}]}],data:[{name:"table",values:[{id:1,value:1},{id:2,value:2},{id:3,value:5}],transform:[{type:"stack",field:"value",as:["v0","v1"]}]},{name:"timer",values:[{min:8}]}],scales:[{name:"color",type:"ordinal",domain:{data:"table",field:"id"},range:{scheme:"category20"}},{name:"x",type:"linear",range:"width",domain:{data:"table",field:"v1"}}],marks:[{type:"group",encode:{enter:{height:{field:{group:"height"}}}},marks:[{type:"text",encode:{update:{baseline:{value:"top"},align:{value:"center"},y:{signal:"0"},x:{signal:"width/2"},text:{signal:"timerStr"},fontSize:{signal:"timerFontSize"},fill:[{test:"baseTimer >= 0",value:"black"},{value:"red"}]}}}]},{type:"group",encode:{enter:{height:{signal:"barHeight"},y:{signal:"timerFontSize"}}},marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"x",field:"v0"},x2:{scale:"x",field:"v1"},y:{value:0},y2:{signal:"barHeight"},fill:{scale:"color",field:"id"}},update:{fillOpacity:{value:1}}}},{type:"rect",encode:{enter:{fill:{value:"white"}},update:{x:{value:0},x2:{scale:"x",signal:"timer"},y:{value:0,offset:3},y2:{signal:"barHeight",offset:-3},fillOpacity:{value:1}}}},{type:"text",from:{data:"table"},encode:{enter:{x:{scale:"x",field:"v1"},y:{signal:"barHeight/2"},fill:{value:"white"},align:{value:"right"},baseline:{value:"middle"},text:{field:"v1"},fontWeight:{value:"bold"},stroke:{scale:"color",field:"id"},fontSize:{signal:"fontSize"}}}}]}]}});var f=a(1962);function v(){let e=(0,l.useSearchParams)(),t=e.get("min"),a=e.get("points"),s=e.get("title"),[v,p]=(0,n.useState)([]),[b,w]=(0,n.useState)(!1),[x,y]=(0,n.useState)(!1),[S,T]=(0,n.useState)(300),[D,z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{T(Math.min(window.innerHeight,window.innerWidth)),a&&p(a.split("-").map((e,t)=>({id:t,value:parseInt(e)})))},[a]);let k={baseTimer:(e,t)=>{if(D&&t<0){let e=new f.WV().toDestination();new f.T9((t,a)=>{e.triggerAttackRelease(a,"16n",t)},["B5","B5"]).start().loop=!1,z(!1),f.J7.start()}}};return(0,i.jsxs)(d.Z,{sx:{paddingTop:6},direction:"column",gap:3,alignItems:"center",children:[(0,i.jsx)(o.Z,{variant:"h3",gutterBottom:!0,children:s}),!b&&!x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{direction:"row",gap:2,children:[(0,i.jsxs)(m.Z,{variant:"contained",onClick:()=>w(!0),children:["Start circle timer (",t," 分)"]}),(0,i.jsxs)(m.Z,{variant:"contained",onClick:()=>y(!0),children:["Start bar timer (",t," 分)"]})]}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(g.Z,{control:(0,i.jsx)(c.Z,{onChange:()=>{z(!0)}}),label:"Alarm"})})]}),b&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r,{actions:!1,data:{table:v,timer:[{min:t}]},width:.8*S,height:.8*S,signalListeners:k})}),x&&(0,i.jsx)(h,{actions:!1,data:{table:v,timer:[{min:t}]},width:.8*window.innerWidth,height:.8*window.innerHeight,signalListeners:k})]})}}},function(e){e.O(0,[208,342,971,69,744],function(){return e(e.s=9204)}),_N_E=e.O()}]);